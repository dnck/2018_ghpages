<!DOC TYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-compatible" content="IE-edge">
		<meta name="viewport" content="width=device-width", initial="scale=1">
		<title>Example for Read Count</title>
	</head> 
	<body>
		<h1>&nbsp ScienceOpen Total Read-Count</h1>
		<p>&nbsp <b>Core javscript library = plot.ly, open source, <a href="https://plot.ly/javascript/open-source-announcement/">MIT License</a></b></p>
		
		<br>&nbsp &nbsp  

		In this example, I match two random log distributions for the ScienceOpen "read" and "cited by" count for an imaginary author. 

		<br>&nbsp &nbsp 

		The imaginary author is roughly based on the summary statistics available for scienceopen member <a href ="https://www.scienceopen.com/search#author/ea42759d-c9a9-4bb0-8437-fa41d099df45">George Perry<a>. 

		<br>&nbsp &nbsp  

		Note the difficulty of visualizing our data. It is almost always log-scale. But, nonetheless, we have a lot of variables and the result is kind of pretty.

		<p>&nbsp &nbsp 

		<b>Try zooming, scaling, and panning. Also try out the last button, my favorite - "compare on hoover". </b></p>


		<div id="tester"></div>
			<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
			<script>
			Plotly.d3.csv('https://raw.githubusercontent.com/dnck/learn_to_code/master/test.csv', function(err, rows){
				var YEAR = 2016;
				var discipline = ['Discipline A', 'Discipline B', 'Discipline C', 'Discipline D', 'Discipline E'];
				var POP_TO_PX_SIZE = 0.33;
				function unpack(rows, key) {
				  return rows.map(function(row) { return row[key]; });
				}

				var data = discipline.map(function(discipline) {
				  var rowsFiltered = rows.filter(function(row) {
				      return (row.discipline === discipline) && (+row.year === YEAR);
				  });
				  return {
				      mode: 'markers',
				      name: discipline,
				      x: unpack(rowsFiltered, 'readCount'),  
				      y: unpack(rowsFiltered, 'citedBy'),
				      text: unpack(rowsFiltered, 'contentTitle'),
				      marker: {
				          sizemode: 'area',
				          size: unpack(rowsFiltered, 'readCount'),
				          sizeref: POP_TO_PX_SIZE
				      }
				  };
				});
				var layout = {
				  xaxis: {title: 'Read Count'},
				  yaxis: {title: 'Cited by Count Total'},
				  margin: {t: 5},
				  hovermode: 'closest'
				};
				Plotly.plot('tester', data, layout, {showLink: false});
				});
			</script>

		<h2>CODE</h2>
		<xmp> 

		<the doc type>
			<docType>
				<head>
					<meta charset="utf-8">
					<meta http-equiv="X-UA-compatible" content="IE-edge">
					<meta name="viewport" content="width=device-width", initial="scale=1">
					<title>Example for Read Count</title>
				</head> 
						<body>
				<h1>ScienceOpen Total Read-Count</h1>
				<div id="tester"></div>
				<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
				<script>
					Plotly.d3.csv('https://raw.githubusercontent.com/dnck/learn_to_code/master/test.csv', function(err, rows){
					var YEAR = 2016;
					var discipline = ['Discipline A', 'Discipline B', 'Discipline C', 'Discipline D', 'Discipline E'];
					var POP_TO_PX_SIZE = 0.33;
					function unpack(rows, key) {
					  return rows.map(function(row) { return row[key]; });
					}

					var data = discipline.map(function(discipline) {
					  var rowsFiltered = rows.filter(function(row) {
					      return (row.discipline === discipline) && (+row.year === YEAR);
					  });
					  return {
					      mode: 'markers',
					      name: discipline,
					      x: unpack(rowsFiltered, 'readCount'),  
					      y: unpack(rowsFiltered, 'citedBy'),
					      text: unpack(rowsFiltered, 'contentTitle'),
					      marker: {
					          sizemode: 'area',
					          size: unpack(rowsFiltered, 'readCount'),
					          sizeref: POP_TO_PX_SIZE
					      }
					  };
					});
					var layout = {
					  xaxis: {title: 'Read Count'},
					  yaxis: {title: 'Cited by Count Total'},
					  margin: {t: 5},
					  hovermode: 'closest'
					};
					Plotly.plot('tester', data, layout, {showLink: false});
					});
				</script>
			</body>
		<the doc type>	
	</xmp>	
	</body>
</html>


